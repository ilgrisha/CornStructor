<!-- File: frontend/src/app/primers/components/run-detail/run-detail.component.html -->
<!-- Version: v0.1.0 -->
<section class="run-detail" *ngIf="run as r">
  <header>
    <h2>Primer Design Report</h2>
    <div class="meta">
      <span>Run ID: <code>{{ r.id }}</code></span>
      <span>Created: {{ r.createdAt | date:'medium' }}</span>
      <span>Target: {{ r.targetStart }}–{{ r.targetEnd }}</span>
      <span>Status: {{ r.status }}</span>
    </div>
  </header>

  <div class="grid">
    <div class="panel" *ngIf="r.result as res">
      <h3>Selected Primers</h3>
      <div class="primer">
        <h4>Forward</h4>
        <pre class="seq">{{ res.forwardPrimer.sequence }}</pre>
        <div class="stats">Tm: {{ res.forwardPrimer.tm | number:'1.0-1' }} °C · GC:
          {{ res.forwardPrimer.gc | number:'1.0-1' }}%</div>
      </div>
      <div class="primer">
        <h4>Reverse</h4>
        <pre class="seq">{{ res.reversePrimer.sequence }}</pre>
        <div class="stats">Tm: {{ res.reversePrimer.tm | number:'1.0-1' }} °C · GC:
          {{ res.reversePrimer.gc | number:'1.0-1' }}%</div>
      </div>

      <div class="score">
        Pair Score:
        <strong>{{ res.pairScore | number:'1.3-3' }}</strong>
      </div>

      <div class="warnings" *ngIf="res.warnings?.length">
        <h4>Warnings</h4>
        <ul>
          <li *ngFor="let w of res.warnings">{{ w }}</li>
        </ul>
      </div>
    </div>

    <div class="panel" *ngIf="align as a">
      <h3>Alignments</h3>
      <div class="aln">
        <h4>Forward ↔ Target</h4>
        <pre>{{ a.forwardTarget }}</pre>
      </div>
      <div class="aln">
        <h4>Reverse ↔ Target (RC)</h4>
        <pre>{{ a.reverseTarget }}</pre>
      </div>
      <div class="aln">
        <h4>Self Dimer</h4>
        <pre>{{ a.selfDimer }}</pre>
      </div>
      <div class="aln">
        <h4>Cross Dimer</h4>
        <pre>{{ a.crossDimer }}</pre>
      </div>
    </div>

    <div class="panel" *ngIf="analysis as an">
      <h3>Target Analysis</h3>
      <div class="gc">
        <strong>GC windows:</strong> {{ gcSummary }}
      </div>
      <div class="flags" *ngIf="an.structureWarnings?.length">
        <h4>Structure Warnings</h4>
        <ul>
          <li *ngFor="let s of an.structureWarnings">{{ s }}</li>
        </ul>
      </div>
      <div class="table" *ngIf="an.homopolymers?.length">
        <h4>Homopolymers</h4>
        <pre>{{ an.homopolymers | json }}</pre>
      </div>
      <div class="table" *ngIf="an.repeats?.length">
        <h4>Repeats</h4>
        <pre>{{ an.repeats | json }}</pre>
      </div>
    </div>
  </div>
</section>
