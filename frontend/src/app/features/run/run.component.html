<!-- File: frontend/src/app/features/run/run.component.html -->
<!-- Version: v2.7.0 -->
<div class="card">
  <div class="card-header">
    <div class="title">Construction tree design</div>
    <div class="actions">
      <button class="btn" (click)="openHistory()">History</button>
      <button class="btn" (click)="openParameters()">Parameters</button>
      <button class="btn primary" (click)="run()">Start design</button>

      <!-- NEW: Seamless navigation to Primers Design tab -->
      <app-go-to-primers-button
        class="btn"
        [sequence]="sequenceText()"
        [start]="selectedStart()"
        [end]="selectedEnd()"
        [name]="sequenceName()">
      </app-go-to-primers-button>
    </div>
  </div>

  <!-- Single result button (no list) -->
  <div class="result-bar" *ngIf="api.resultIndexLink()">
    <a class="result-primary"
       [href]="api.resultIndexLink()!"
       target="_blank" rel="noopener noreferrer">
      Open report
    </a>
  </div>

  <!-- Logs (local view) -->
  <div #logPane class="log-pane">
    <div *ngFor="let line of api.logLines()" class="log-line">{{ line }}</div>
  </div>

  <!-- NEW: Shared Log box (shows the same lines mirrored to Primers tab) -->
  <div class="shared-log-wrapper">
    <h4 class="shared-log-title">Shared Log</h4>
    <app-shared-log-view></app-shared-log-view>
  </div>
</div>

<!-- History modal -->
<app-runs-history [open]="historyOpen()" (close)="closeHistory()"></app-runs-history>

<!-- Parameters modal -->
<app-parameters-editor [open]="paramsOpen()" (close)="closeParameters()"></app-parameters-editor>
